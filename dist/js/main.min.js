"use strict";function FormSubmit(e){this.element=e.element,this.textType=this.element.find("[data-valid=text]"),this.mailType=this.element.find("[data-valid=email]"),this.phoneType=this.element.find("[data-valid=phone]"),this.bindEvents()}function MainMenuOpen(e){this.element=$(".js-main-menu"),this.nav=this.element.siblings(".js-nav"),this.navLink=this.element.find(".nav__link"),this.submenu=".submenu",this.bindEvents()}function initialize(){var e=new google.maps.LatLng(54.991955,82.845115),t={zoom:12,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map"),t);new google.maps.Marker({position:e,map:i,icon:"../img/marker.png"})}FormSubmit.prototype.bindEvents=function(){this.element.on("submit",this.submit.bind(this))},FormSubmit.prototype.submit=function(e){e.preventDefault(),this.isValidateForm()||this.sendForm()},FormSubmit.prototype.isValidateForm=function(){return this.validText(),this.validPhone(),this.validEmail(),this.element.find(".js-error").length},FormSubmit.prototype.sendForm=function(){var e=this.element.attr("action");if(!e)return void console.log("Set action attribute to your form");var t=this.element.serialize(),i=this.element.find("input, textarea");$.ajax({url:e,type:"POST",data:t}).fail(function(){console.log("fail")}).done(function(){i.val(""),console.log("done")})},FormSubmit.prototype.validText=function(){this.textType.each(function(){var e=$(this),t=""===$.trim(e.val());e.toggleClass("js-error",t)})},FormSubmit.prototype.validPhone=function(){this.phoneType.each(function(){var e=$(this),t=/^(?:\+?\d{2}[ -]?[\d -][\d -]+)$/,i=t.test(e.val());e.toggleClass("js-error",!i)})},FormSubmit.prototype.validEmail=function(){this.mailType.each(function(){var e=$(this),t=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])/,i=t.test(e.val());e.toggleClass("js-error",!i)})},MainMenuOpen.prototype.bindEvents=function(){this.nav.on("click",this.openMainMaenu.bind(this)),this.element.on("click",this.navLink,this.listenSubMenu.bind(this))},MainMenuOpen.prototype.openMainMaenu=function(e){$(e.target).toggleClass("js-active"),$(e.target).siblings(".js-nav-list").slideToggle(),this.closeAllSubMenu()},MainMenuOpen.prototype.listenSubMenu=function(e){if(this.hasSubmenu(e)&&$(window).width()<740){if(e.preventDefault(),$(e.target).siblings(this.submenu).hasClass("js-active"))return void this.closeAllSubMenu();this.closeAllSubMenu(),this.openSubmenu(e)}},MainMenuOpen.prototype.hasSubmenu=function(e){return $(e.target).siblings(this.submenu).length},MainMenuOpen.prototype.closeAllSubMenu=function(){$(this.submenu).each(function(){$(this).removeClass("js-active"),$(this).slideUp()})},MainMenuOpen.prototype.openSubmenu=function(e){var t=$(e.target).siblings(this.submenu);t.addClass("js-active"),t.slideDown()},$(document).ready(function(){$("form").length&&(new FormSubmit({element:$(".js-assotiation-form")}),new FormSubmit({element:$(".js-subscribe-form")}),new FormSubmit({element:$(".js-contacts-form")})),new MainMenuOpen,$(".main-slider").slick({autoplay:!1,dots:!0,slidesToShow:1,slidesToScroll:1}),$(".js-article").on("click",function(e){e.preventDefault();var t=$(this),i=$(".js-article").index($(this));$(".articles__item, .js-article-list").removeClass("js-active"),t.closest(".articles__item").addClass("js-active"),$(".js-article-list").eq(i).addClass("js-active")}),$(".partners-slider").slick({autoplay:!1,dots:!0,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:1e3,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:740,settings:{slidesToShow:2,slidesToScroll:2,dots:!1}}]}),$("#map").length&&google.maps.event.addDomListener(window,"load",initialize),$(".contacts").click(function(){$(".contacts #map").css("pointer-events","auto")}),$(".js-contacts-form-title").on("click",function(){$(window).width()>740&&($(".js-contacts-block").slideToggle(),$(".js-contacts-form-title").toggleClass("js-active"))}),$(".gallery-nav").slick({autoplay:!1,slidesToShow:3,slidesToScroll:1,vertical:!0,asNavFor:".gallery-for",centerMode:!0,focusOnSelect:!0}),$(".gallery-for").slick({autoplay:!1,slidesToShow:1,slidesToScroll:1,fade:!0,asNavFor:".gallery-nav",responsive:[{breakpoint:1e3,settings:{fade:!1}}]}),$(".js-up").on("click",function(){$("html, body").animate({scrollTop:0},1e3)})});